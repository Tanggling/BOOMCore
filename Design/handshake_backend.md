## 后端握手信号

### 前后端握手

前端和后端的握手信号来自于前端的Decoder QUEUE以及后端的ready信号；

前端握手信号是一个配置bypass的fifo的valid信号；

后端握手信号是ready信号，其产生条件为：ROB有空的4项，所有IQ非满，无flush信号

* ROB有空的4项，因为我们每周期最多以两项为单位重命名，而到后端时，P级已经有两条指令需要写入ROB（但还没有写入），若此时只剩下空闲的2项，那么最新的两条指令到重命名级时，会覆盖掉ROB中最旧的两项；
* 所有IQ非满，其实是重命名级、分发级到发射级的一个握手信号，如果有一个IQ满，那么首先应该阻止指令从分发级进入IQ，即完全阻止P级，同时，保证后端的统一性，要阻止重命名级进入P级和前端进入后端（后面可以考虑改成skidbuf）；



### R级到P级握手

R->P：掩码控制信号：mask

P->R：所有IQ非满，即P可以顺利到I级



### P级到I级握手

P->I：valid信号：掩码逻辑加上类型判断

I->P：发射队列非满



### I级到FIFO握手

每一个I级的IQ和FIFO之间有一个FU，

FIFO接收来自FU的valid信号为FU数据有效：正常流水的情况下为选中发射表项为**无效指令**或**操作数均准备好**；

ready信号为：FIFO未满或者正在FU的指令无效（相当于NOP）



### FIFO到CDB

skidbuf握手



